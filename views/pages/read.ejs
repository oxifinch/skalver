<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
        <title><%= book.title %> | Skalver</title>
		<meta name="description" content="Skalver reading page"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="/css/style.css">
        <style>
            .hidden {
                display: none;
            }
            #reader_page_markdown {
                white-space: pre-wrap;
            }
        </style>
	</head>

	<body id="page_container_reader" class="container-fluid d-flex flex-column vh-100">
        <%- include ("../partials/read-modal-editbook.ejs", {book: book}) %>
        <%- include ("../partials/read-header.ejs", {book: book}) %>
        <!-- TODO: Replace this janky form with an actual modal -->
        <div id="new_chapter_window" class="hidden ">
            <h2>Create New Chapter</h2> 
            <form action="/chapter/create/<%=book.id%>" method="POST">
                <h4>Name</h4>
                <input type="text" name="name" id="editor_new_name">
                <textarea name="markdown" id="editor_new_markdown" cols="60" rows="20"></textarea>
                <button type="submit">Create</button>
            </form>
        </div>
        <button id="new_chapter_button" class="btn btn-primary" style="display: none">Create New Chapter</button>
        <!--  -->
        <%- include ("../partials/read-viewport.ejs", {htmlOutput: htmlOutput, nextChapter: nextChapter, prevChapter: prevChapter}) %>
        <div id="cover_reader" class="fixed-top vh-100 vw-100"></div>
        <script>
            let activeChapter = <%- JSON.stringify(chapter) %>
            let parentBook = <%- JSON.stringify(book) %>
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <script src="/js/app.js"></script>
	</body>
</html>

