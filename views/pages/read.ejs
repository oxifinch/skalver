<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
        <title><%= book.title %> | Skalver</title>
		<meta name="description" content="Skalver reading page"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="/css/style.css">
	</head>

	<body id="page_container_reader">
        <%- include ("../partials/read-modal-editbook.ejs", {book: book}) %>

        <div id="reader_sidepanel" class="fixed-top">
            <div class="h-100 d-flex flex-column bg-dark text-light justify-content-start p-2">
                <div id="reader_sidepanel_title">
                    <hr>
                    <h1 class="h2 mb-0 text-center"><%=book.title%></h1>
                    <% if(book.subtitle || book.subtitle != "") { %>
                           <h2 class="h4 mb-2 text-center"><%=book.subtitle%></h2>
                    <% } %>
                    <h3 class="h5 text-center"><em>by <%=book.author%></em></h3>
                    <hr>
                </div>
                <div id="reader_sidepanel_booktype" class="my-1">
                    <% if (book.bookType) { %>
                           <h3 class="h5 my-1 text-center"><%=book.bookType%></h3>
                    <% } %>
                </div>

                <div id="reader_sidepanel_options" class="">
                    <button class="btn btn-primary">Edit Book Info</button>
                </div>

                <div id="reader_sidepanel_coauthors" class="p-2 my-1">
                    <h3 class="h5">Co-Authors</h3>
                    <% if (book.coauthors.length > 0) { %>
                        <ul>
                        <% book.coauthors.forEach((author) => { %>
                            <li><%= author %></li>
                        <% }); %>
                        </ul>
                    <% } else { %>
                    <h4 class="h5 text-secondary mb-0">None</h4>
                    <% } %>
                </div>
                <div id="reader_sidepanel_chapterlist" class="p-2 my-1 flex-grow-1">
                    <h4 class="h5">Chapters</h4>
                    <ol class="mx-0 py-2">
                    <% book.chapters.forEach((chapter) => { %>
                    <li data-chapterid="<%=chapter.id%>" class="p-1 bg-dark rounded">
                        <%=chapter.name%>
                        <i><a class="mx-3" href="/read/<%=book.id%>">Read</a></i>
                    </li>    
                    <% }); %>
                    <li id="chapterlist_addnew"><i>Add New</i></li>
                    </ol>
                </div>
                <button class="btn btn-success w-100">Create Chapter</button>
            </div>
        </div>
        <div id="reader_viewport_container">
            <%- include("../partials/read-viewport.ejs", {book: book}) %>
        </div>

        <div id="cover_reader" class="fixed-top vh-100 vw-100"></div>
        <script>
            let activeChapter = <%- JSON.stringify(chapter) %>
            let parentBook = <%- JSON.stringify(book) %>
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <script src="/js/app.js"></script>
	</body>
</html>

